---

title: CLI

keywords: fastai
sidebar: home_sidebar

summary: "Command line scripts."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/06_cli.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_viirs750_download" class="doc_header"><code>banet_viirs750_download</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_viirs750_download</code>(<strong><code>region</code></strong>:"Region name", <strong><code>tstart</code></strong>:"Start of serach window yyyy-mm-dd HH:MM:SS", <strong><code>tend</code></strong>:"End of search windo yyyy-mm-dd HH:MM:SS", <strong><code>email</code></strong>:"ladsweb user email", <strong><code>auth</code></strong>:"ladsweb user authentication key (go to Profile&gt;App Keys)", <strong><code>path_save</code></strong>:"Path to save the outputs of the request", <strong><code>regions_path</code></strong>:"Path for region json files"=<em><code>'../data/regions'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l </span>
<span class="nv">email</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">auth</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">region</span><span class="o">=</span><span class="s2">&quot;PI&quot;</span>
<span class="nv">tstart</span><span class="o">=</span><span class="s2">&quot;2017-10-27 00:00:00&quot;</span>
<span class="nv">tend</span><span class="o">=</span><span class="s1">&#39;2017-10-27 23:59:59&#39;</span>
<span class="nv">path_save</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/rawdata&quot;</span>

banet_viirs750_download <span class="nv">$region</span> <span class="s2">&quot;</span><span class="nv">$tstart</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$tend</span><span class="s2">&quot;</span> <span class="nv">$email</span> <span class="nv">$auth</span> <span class="nv">$path_save</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_create_dataset" class="doc_header"><code>banet_create_dataset</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L46" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_create_dataset</code>(<strong><code>region</code></strong>:"Region name", <strong><code>viirs_path</code></strong>:"Input path for VIIRS raw data", <strong><code>fires_path</code></strong>:"Input path for Active Fires csv", <strong><code>save_path</code></strong>:"Path to save outputs", <strong><code>mcd64_path</code></strong>:"Input path for MCD64 raw data"=<em><code>None</code></em>, <strong><code>cci51_path</code></strong>:"Input path for FireCCI51 raw data"=<em><code>None</code></em>, <strong><code>regions_path</code></strong>:"Path where region defenition files are stored"=<em><code>'../data/regions'</code></em>, <strong><code>bands</code></strong>:"List of bands to use as inputs for VIIRS raw data"=<em><code>['Reflectance_M5', 'Reflectance_M7', 'Reflectance_M10', 'Radiance_M12', 'Radiance_M15', 'SolarZenithAngle', 'SatelliteZenithAngle']</code></em>, <strong><code>year</code></strong>:"Set to process a single year instead of all available"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">viirs_path</span><span class="o">=</span>/srv/banet/data/rawdata
<span class="nv">mcd64_path</span><span class="o">=</span>/srv/mcd64
<span class="nv">cci51_path</span><span class="o">=</span>/srv/BA_validation/data/FireCCI51
<span class="nv">save_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">fires_path</span><span class="o">=</span>/srv/banet/data/hotspots
<span class="nv">region</span><span class="o">=</span>PI

<span class="c1"># Create dataset only for VIIRS</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> --year<span class="o">=</span><span class="m">2017</span>

<span class="c1"># Create dataset for VIIRS and MCD64A1C6</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> <span class="se">\</span>
                     --mcd64_path <span class="nv">$mcd64_path</span> --year<span class="o">=</span><span class="m">2017</span>

<span class="c1"># Create dataset for VIIRS, MCD64A1C6 and FireCCI51 data.</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> <span class="se">\</span>
                     --mcd64_path <span class="nv">$mcd64_path</span> --cci51_path <span class="nv">$cci51_path</span> --year<span class="o">=</span><span class="m">2017</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_dataset2tiles" class="doc_header"><code>banet_dataset2tiles</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L88" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_dataset2tiles</code>(<strong><code>region</code></strong>:"Region name", <strong><code>input_path</code></strong>:"Input path for dataset", <strong><code>output_path</code></strong>:"Output path for tiles dataset", <strong><code>size</code></strong>:"Tiles size"=<em><code>128</code></em>, <strong><code>step</code></strong>:"Step size of moving window to create tiles"=<em><code>100</code></em>, <strong><code>year</code></strong>:"Set to process a single year instead of all available"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/tiles/train
<span class="nv">region</span><span class="o">=</span>PI

banet_dataset2tiles <span class="nv">$region</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_predict_monthly" class="doc_header"><code>banet_predict_monthly</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L104" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_predict_monthly</code>(<strong><code>region</code></strong>:"Region name", <strong><code>input_path</code></strong>:"Input path for dataset", <strong><code>output_path</code></strong>:"Output path for tiles dataset", <strong><code>year</code></strong>:"Set to process a single year instead of all available", <strong><code>weight_files</code></strong>:"List of pth weight files"=<em><code>['/srv/banet/data/models/banetv0.20-val2017-fold0.pth', '/srv/banet/data/models/banetv0.20-val2017-fold1.pth', '/srv/banet/data/models/banetv0.20-val2017-fold2.pth']</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/monthly
<span class="nv">region</span><span class="o">=</span>PI
<span class="nv">year</span><span class="o">=</span><span class="m">2017</span>

banet_predict_monthly <span class="nv">$region</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span> <span class="nv">$year</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_train_model" class="doc_header"><code>banet_train_model</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L123" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_train_model</code>(<strong><code>val_year</code></strong>:"Validation year", <strong><code>r_fold</code></strong>:"Fold name", <strong><code>input_path</code></strong>:"Input path for tiles dataset", <strong><code>output_path</code></strong>:"Path to save the model weights", <strong><code>n_epochs</code></strong>:"Number of epochs to train"=<em><code>8</code></em>, <strong><code>lr</code></strong>:"Learning rate"=<em><code>0.01</code></em>, <strong><code>nburned</code></strong>:"Minimum number of burned pixels to define a sequence"=<em><code>10</code></em>, <strong><code>n_episodes_train</code></strong>:"Number of episodes per train epoch"=<em><code>2000</code></em>, <strong><code>n_episodes_valid</code></strong>:"Number of episodes for validation"=<em><code>100</code></em>, <strong><code>sequence_len</code></strong>:"Number of time-steps in sequence"=<em><code>64</code></em>, <strong><code>n_sequences</code></strong>:"Number of sequences per batch"=<em><code>1</code></em>, <strong><code>pretrained_weights</code></strong>:"Path to a weights file"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">val_year</span><span class="o">=</span><span class="m">2018</span>
<span class="nv">fold_name</span><span class="o">=</span><span class="m">99</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/tiles/train
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/models

banet_train_model <span class="nv">$val_year</span> <span class="nv">$fold_name</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span>
</pre></div>

</div>
</div>
</div>
</div>
 

