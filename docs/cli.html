---

title: CLI

keywords: fastai
sidebar: home_sidebar

summary: "Command line scripts."
description: "Command line scripts."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/06_cli.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_viirs750_download" class="doc_header"><code>banet_viirs750_download</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_viirs750_download</code>(<strong><code>region</code></strong>:"Region name", <strong><code>tstart</code></strong>:"Start of serach window yyyy-mm-dd HH:MM:SS", <strong><code>tend</code></strong>:"End of search windo yyyy-mm-dd HH:MM:SS", <strong><code>path_save</code></strong>:"Path to save the outputs of the request", <strong><code>regions_path</code></strong>:"Path for region json files")</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l </span>
<span class="nv">region</span><span class="o">=</span><span class="s2">&quot;PI&quot;</span>
<span class="nv">tstart</span><span class="o">=</span><span class="s2">&quot;2017-10-27 00:00:00&quot;</span>
<span class="nv">tend</span><span class="o">=</span><span class="s2">&quot;2017-10-27 23:59:59&quot;</span>
<span class="nv">path_save</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/rawdata&quot;</span>
<span class="nv">regions_path</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/regions&quot;</span>
banet_viirs750_download <span class="nv">$region</span> <span class="s2">&quot;</span><span class="nv">$tstart</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$tend</span><span class="s2">&quot;</span> <span class="nv">$path_save</span> <span class="nv">$regions_path</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_create_dataset" class="doc_header"><code>banet_create_dataset</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_create_dataset</code>(<strong><code>region</code></strong>:"Region name", <strong><code>viirs_path</code></strong>:"Input path for VIIRS raw data", <strong><code>fires_path</code></strong>:"Input path for Active Fires csv", <strong><code>save_path</code></strong>:"Path to save outputs", <strong><code>regions_path</code></strong>:"Path where region defenition files are stored", <strong><code>mcd64_path</code></strong>:"Input path for MCD64 raw data"=<em><code>None</code></em>, <strong><code>cci51_path</code></strong>:"Input path for FireCCI51 raw data"=<em><code>None</code></em>, <strong><code>bands</code></strong>:"List of bands to use as inputs for VIIRS raw data"=<em><code>['Reflectance_M5', 'Reflectance_M7', 'Reflectance_M10', 'Radiance_M12', 'Radiance_M15', 'SolarZenithAngle', 'SatelliteZenithAngle']</code></em>, <strong><code>year</code></strong>:"Set to process a single year instead of all available"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">region</span><span class="o">=</span>PI
<span class="nv">viirs_path</span><span class="o">=</span>/srv/banet/data/rawdata
<span class="nv">mcd64_path</span><span class="o">=</span>/srv/mcd64
<span class="nv">cci51_path</span><span class="o">=</span>/srv/BA_validation/data/FireCCI51
<span class="nv">save_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">fires_path</span><span class="o">=</span>/srv/banet/data/hotspots
<span class="nv">regions_path</span><span class="o">=</span>/srv/banet/data/regions

<span class="c1"># Create dataset only for VIIRS</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> <span class="se">\</span>
                     <span class="nv">$regions_path</span> --year<span class="o">=</span><span class="m">2017</span>

<span class="c1"># Create dataset for VIIRS and MCD64A1C6</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> <span class="se">\</span>
                     <span class="nv">$regions_path</span> --mcd64_path <span class="nv">$mcd64_path</span> --year<span class="o">=</span><span class="m">2017</span>

<span class="c1"># Create dataset for VIIRS, MCD64A1C6 and FireCCI51 data.</span>
banet_create_dataset <span class="nv">$region</span> <span class="nv">$viirs_path</span> <span class="nv">$fires_path</span> <span class="nv">$save_path</span> <span class="se">\</span>
                     <span class="nv">$regions_path</span> --mcd64_path <span class="nv">$mcd64_path</span> <span class="se">\</span>
                     --cci51_path <span class="nv">$cci51_path</span> --year<span class="o">=</span><span class="m">2017</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_dataset2tiles" class="doc_header"><code>banet_dataset2tiles</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_dataset2tiles</code>(<strong><code>region</code></strong>:"Region name", <strong><code>input_path</code></strong>:"Input path for dataset", <strong><code>output_path</code></strong>:"Output path for tiles dataset", <strong><code>size</code></strong>:"Tiles size"=<em><code>128</code></em>, <strong><code>step</code></strong>:"Step size of moving window to create tiles"=<em><code>100</code></em>, <strong><code>year</code></strong>:"Set to process a single year instead of all available"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/tiles/train
<span class="nv">region</span><span class="o">=</span>PI

banet_dataset2tiles <span class="nv">$region</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_predict_monthly" class="doc_header"><code>banet_predict_monthly</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_predict_monthly</code>(<strong><code>region</code></strong>:"Region name", <strong><code>input_path</code></strong>:"Input path for dataset", <strong><code>output_path</code></strong>:"Output path for tiles dataset", <strong><code>year</code></strong>:"Set to process a single year instead of all available", <strong><code>weight_files</code></strong>:"List of pth weight files"=<em><code>['/home/mnpinto/.banet/models/banetv0.20-val2017-fold0.pth', '/home/mnpinto/.banet/models/banetv0.20-val2017-fold1.pth', '/home/mnpinto/.banet/models/banetv0.20-val2017-fold2.pth']</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/procdata
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/monthly
<span class="nv">region</span><span class="o">=</span>PI
<span class="nv">year</span><span class="o">=</span><span class="m">2017</span>

banet_predict_monthly <span class="nv">$region</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span> <span class="nv">$year</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_predict_times" class="doc_header"><code>banet_predict_times</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L126" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_predict_times</code>(<strong><code>region</code></strong>:"Region name", <strong><code>tstart</code></strong>:"Start of serach window yyyy-mm-dd HH:MM:SS", <strong><code>tend</code></strong>:"End of search windo yyyy-mm-dd HH:MM:SS", <strong><code>input_path</code></strong>:"Input path for dataset", <strong><code>output_path</code></strong>:"Output path for tiles dataset", <strong><code>regions_path</code></strong>:"Path for region json files", <strong><code>product</code></strong>:"Name of product (default VIIRS750)"=<em><code>'VIIRS750'</code></em>, <strong><code>output</code></strong>:"Name of file to save results"=<em><code>'data'</code></em>, <strong><code>weight_files</code></strong>:"List of pth weight files"=<em><code>['/home/mnpinto/.banet/models/banetv0.20-val2017-fold0.pth', '/home/mnpinto/.banet/models/banetv0.20-val2017-fold1.pth', '/home/mnpinto/.banet/models/banetv0.20-val2017-fold2.pth']</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">region</span><span class="o">=</span><span class="s2">&quot;PI&quot;</span>
<span class="nv">tstart</span><span class="o">=</span><span class="s2">&quot;2017-10-27 00:00:00&quot;</span>
<span class="nv">tend</span><span class="o">=</span><span class="s2">&quot;2017-10-27 23:59:59&quot;</span>
<span class="nv">input_path</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/procdata&quot;</span>
<span class="nv">output_path</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/monthly&quot;</span>
<span class="nv">regions_path</span><span class="o">=</span><span class="s2">&quot;/srv/banet/data/regions&quot;</span>

banet_predict_times <span class="nv">$region</span> <span class="s2">&quot;</span><span class="nv">$tstart</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$tend</span><span class="s2">&quot;</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span> <span class="nv">$regions_path</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_train_model" class="doc_header"><code>banet_train_model</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_train_model</code>(<strong><code>val_year</code></strong>:"Validation year", <strong><code>r_fold</code></strong>:"Fold name", <strong><code>input_path</code></strong>:"Input path for tiles dataset", <strong><code>output_path</code></strong>:"Path to save the model weights", <strong><code>n_epochs</code></strong>:"Number of epochs to train"=<em><code>8</code></em>, <strong><code>lr</code></strong>:"Learning rate"=<em><code>0.01</code></em>, <strong><code>nburned</code></strong>:"Minimum number of burned pixels to define a sequence"=<em><code>10</code></em>, <strong><code>n_episodes_train</code></strong>:"Number of episodes per train epoch"=<em><code>2000</code></em>, <strong><code>n_episodes_valid</code></strong>:"Number of episodes for validation"=<em><code>100</code></em>, <strong><code>sequence_len</code></strong>:"Number of time-steps in sequence"=<em><code>64</code></em>, <strong><code>n_sequences</code></strong>:"Number of sequences per batch"=<em><code>1</code></em>, <strong><code>pretrained_weights</code></strong>:"Path to a weights file"=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">val_year</span><span class="o">=</span><span class="m">2018</span>
<span class="nv">fold_name</span><span class="o">=</span><span class="m">99</span>
<span class="nv">input_path</span><span class="o">=</span>/srv/banet/data/tiles/train
<span class="nv">output_path</span><span class="o">=</span>/srv/banet/data/models

banet_train_model <span class="nv">$val_year</span> <span class="nv">$fold_name</span> <span class="nv">$input_path</span> <span class="nv">$output_path</span>
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="banet_nrt_run" class="doc_header"><code>banet_nrt_run</code><a href="https://github.com/mnpinto/banet/tree/master/banet/cli.py#L165" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>banet_nrt_run</code>(<strong><code>region</code></strong>:"Region name", <strong><code>left</code></strong>:"Left limit of the bounding box.", <strong><code>bottom</code></strong>:"Bottom limit of the bounding box.", <strong><code>right</code></strong>:"Right limit of the bounding box.", <strong><code>top</code></strong>:"Top limit of the bounding box.", <strong><code>project_path</code></strong>:"Root directory of the project", <strong><code>hotspots_region</code></strong>:"Hotspots region name", <strong><code>skip_hotspots</code></strong>:"Skip download of ladsweb data"=<em><code>False</code></em>, <strong><code>skip_ladsweb</code></strong>:"Skip download of ladsweb data"=<em><code>False</code></em>, <strong><code>skip_preprocess</code></strong>:"Skip download of ladsweb data"=<em><code>False</code></em>, <strong><code>skip_getpreds</code></strong>:"Skip download of ladsweb data"=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>hotspots_region</code> name should be defined according with the image bellow. Names with multiple words use <code>_</code> in place of the spaces. More info here: <a href="https://firms.modaps.eosdis.nasa.gov/active_fire/#firms-txt">https://firms.modaps.eosdis.nasa.gov/active_fire/#firms-txt</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://firms.modaps.eosdis.nasa.gov/images/Regions_500px.jpg&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="nv">region</span><span class="o">=</span>PI
<span class="nv">project_path</span><span class="o">=</span>data
<span class="nv">hotspots_region</span><span class="o">=</span>Europe
<span class="nv">left</span><span class="o">=</span>-10
<span class="nv">bottom</span><span class="o">=</span><span class="m">36</span>
<span class="nv">right</span><span class="o">=</span><span class="m">5</span>
<span class="nv">top</span><span class="o">=</span><span class="m">44</span>
banet_nrt_run <span class="nv">$region</span> <span class="nv">$left</span> <span class="nv">$bottom</span> <span class="nv">$right</span> <span class="nv">$top</span> <span class="nv">$project_path</span> <span class="nv">$hotspots_region</span>
</pre></div>
<p><strong>Important:</strong> Note that hotspots will only be automatically downloaded starting 7 days ago from the current date. If you want to compute burned areas for an earlier period you need to manually donwload the active fires data.</p>

</div>
</div>
</div>
</div>
 

